@page "/{eventId}/{eventRole}/Rules"
@model ServerCore.Pages.EventSpecific.IndexModel
@{
    ViewData["Title"] = "Rules";
    ViewData["AdminRoute"] = "/EventSpecific/Rules";
    ViewData["AuthorRoute"] = "/EventSpecific/Rules";
    ViewData["PlayRoute"] = "/EventSpecific/Rules";
    var eventPage = Model as ServerCore.ModelBases.EventSpecificPageModel;
    var Event = eventPage?.Event;
}

@if ((Event.EventBegin.Year < 2024) || string.IsNullOrEmpty(Event.HomePartial))
{
    if (!string.IsNullOrEmpty(Event.RulesContent))
    {
        @Html.Raw(Event.RulesContent);
    }
    else
    {
        <partial name="../Resources/@(Event.HomePartial ?? "Default")/RulesPartial.cshtml" />
    }
}
else
{
    <environment include="Development">
        <iframe id="rules-frame" style="width:100%;height:100%;overflow-x:scroll;overflow-y:visible;" title="Rules Content" sandbox="allow-same-origin allow-scripts allow-popups" src="http://127.0.0.1:10000/devstoreaccount1/evt@(Model.Event.ID)/resources/rules-content.html"></iframe>
    </environment>
    <environment exclude="Development">
        <iframe id="rules-frame" style="width:100%;height:100%;overflow-x:scroll;overflow-y:visible;" title="Rules Content" sandbox="allow-same-origin allow-scripts allow-popups" src="https://puzzleserverteststore.blob.core.windows.net/evt@(Model.Event.ID)/resources/rules-content.html"></iframe>
    </environment>
}